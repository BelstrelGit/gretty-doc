= Gretty configuration

When you apply gretty plugin, it adds +gretty+ extension to the
project. You can (but you don't have to) customize every aspect of gretty plugin
with the help of gretty DSL:

[source,groovy]
----
gretty {
  port = 8081
  contextPath = '/MyWebApp'
  // ... many more properties
}
----

All gretty tasks, when invoked on given project, use properties of gretty extension.

If you don't specify any properties in gretty extension (or omit it altogether),
gretty tasks run with reasonable defaults.

== Server-specific properties

Gretty extension supports the following server-specific properties:

[cols="1,1,1,10", options="header"]
|===
| Property
| Type
| Default
| Purpose

| [[jvmArgs]] jvmArgs
| List<String>
| []
| Additional JVM arguments to Jetty process.

| [[host]] host
| String
| "localhost"
| host is passed to Jetty connectors. If you use HTTPS, host must match CN of the subject DN of the certificate (if you use link:HTTPS-support#HTTPS-Auto-configuration[HTTP auto-configuration], this is ensured automatically).

| [[httpEnabled]] httpEnabled
| boolean
| true
| When httpEnabled is true, Gretty configures HTTP connector for the designated httpPort. Otherwise HTTP protocol is disabled. Normally either httpEnabled or httpsEnabled should be true.

| [[httpPort]] httpPort
| int
| 8080
| TCP-port used by Jetty for incoming HTTP-requests.

| [[port]] port
| int
| 8080
| This property is exactly the same as httpPort

| [[httpIdleTimeout]] httpIdleTimeout
| int
| null
| When not null, defines the time, in milliseconds, that the HTTP connection can be idle before it is closed. +
See also: http://www.eclipse.org/jetty/documentation/current/configuring-connectors.html[Jetty documentation, configuring connectors].

| [[httpsEnabled]] httpsEnabled
| boolean
| false
| When httpsEnabled is true, Gretty configures HTTPS connector for the designated httpsPort. Otherwise HTTPS protocol is disabled. Normally either httpEnabled or httpsEnabled should be true. +
See also: link:HTTPS-support[HTTPS support].

| [[httpsPort]] httpsPort
| int
| 8443
| TCP-port used by Jetty for incoming HTTPS-requests. +
**Attention:** setting httpsPort alone is not enough to enable HTTPS protocol. You must set httpsEnabled=true in order to enable HTTPS.

| [[sslKeyStorePath]] sslKeyStorePath
| String or java.io.File
| null
| Absolute or relative path to the key-store, containing key and certificate for HTTPS connection. If sslKeyStorePath is not specified, all other SSL-related properties are ignored and HTTPS is auto-configured (if it is enabled). +
See also: link:HTTPS-support#https-manual-configuration[HTTPS manual configuration]

| [[sslKeyStorePassword]] sslKeyStorePassword
| String
| null
| Password for the key-store designated by property sslKeyStorePath. +
See also: link:HTTPS-support#https-manual-configuration[HTTPS manual configuration]

| [[sslKeyManagerPassword]] sslKeyManagerPassword
| String
| sslKeyStorePassword
| Password for the key of this host, stored in key-store designated by property sslKeyStorePath. +
See also: link:HTTPS-support#https-manual-configuration[HTTPS manual configuration]

| [[sslTrustStorePath]] sslTrustStorePath
| String or java.io.File
| sslKeyStorePath
| Absolute or relative path to the trust-store for HTTPS connection.  +
See also: link:HTTPS-support#https-manual-configuration[HTTPS manual configuration]

| [[sslKeyStorePassword]] sslKeyStorePassword
| String
| null
| Password for the key-store designated by property sslKeyStorePath. +
See also: link:HTTPS-support#https-manual-configuration[HTTPS manual configuration]

| [[httpsIdleTimeout]] httpsIdleTimeout
| int
| null
| When not null, defines the time, in milliseconds, that the HTTPS connection can be idle before it is closed. +
See also: http://www.eclipse.org/jetty/documentation/current/configuring-connectors.html[Jetty documentation, configuring connectors].

| [[servicePort]] servicePort
| int
| 9900
| TCP-port used by Gretty to send commands to Jetty process.

| [[statusPort]] statusPort
| int
| 9901
| TCP-port used by Jetty process to send status back to Gretty.

| [[jettyXmlFile]] jettyXmlFile
| String or java.io.File
| "jetty.xml"
| Name and/or location of "jetty.xml" file. +
See also: link:jetty.xml-support[jetty.xml support].

| [[scanInterval]] scanInterval
| int
| 0
| Hot-deployment scan interval, in seconds. +
See also: link:Hot-deployment[Hot deployment].

| [[logbackConfigFile]] logbackConfigFile
| String
| "logback.groovy" or "logback.xml"
| Absolute or relative path to logback configuration file (.groovy or .xml). +
See also: link:Logging[].

| [[loggingLevel]] loggingLevel
| String
| "INFO"
| slf4j logging-level for jetty process. +
See also: link:Logging[].

| [[consoleLogEnabled]] consoleLogEnabled
| boolean
| true
| Defines whether log messages are written to the terminal. +
See also: link:Logging[].

| [[fileLogEnabled]] fileLogEnabled
| boolean
| true
| Defines, whether log messages are written to the log-file. +
See also: link:Logging[].

| [[logFileName]] logFileName
| String
| "${project.name}.log"
| Log file name (without path). +
See also: link:Logging[].

| [[logDir]] logDir
| String
| "${user.home}/logs"
| Directory, where the log file is created. +
See also: link:Logging[].

| [[onStart]] onStart
| function(Closure)
| -
| Adds closure to be called just before jetty server is started.

| [[onStop]] onStop
| function(Closure)
| -
| Adds closure to be called just after jetty server is stopped.

| [[onScan]] onScan
| function(Closure)
| -
| Adds closure to be called on hot-deployment scan. +
See also: link:Hot-deployment[Hot deployment].

| [[onScanFilesChanged]] onScanFilesChanged
| function(Closure)
| -
| Adds closure to be called whenever hot-deployment detects that files or folders were changed. +
See also: link:Hot-deployment[Hot deployment].
|===

== Web-app-specific properties

Gretty extension supports the following web-app-specific properties:

[cols="1,1,1,6", options="header"]
|===
| Property
| Type
| Default
| Purpose

| [[contextPath]] contextPath
| String
| "/${project.name}"
| Context path for the web-app. +
contextPath affects only gretty tasks.
If you assemble WAR file and deploy it to some servlet container, you must define context
path by means of that container.

| [[initParameter]] initParameter
| function(String key, String value)
| -
| Adds web-app initialization parameter. +
It has the same meaning/effect as +/web-app/servlet/init-param+ element in "web.xml". 
initParameter affects only gretty tasks.
If you assemble WAR file and deploy it to some servlet container, you must define init-parameters
in "web.xml".

| [[realm]] realm
| String
| null
| Security realm for the given web-app. +
See also: link:Security-realms[Security Realms].

| [[realmConfigFile]] realmConfigFile
| String or java.io.File
| "jetty-realm.properties"
| Properties file, containing security realm properties. +
See also: link:Security-realms[Security Realms].

| [[jettyEnvXmlFile]] jettyEnvXmlFile
| String or java.io.File
| "jetty-env.xml"
| Name and/or location of "jetty-env.xml" file. +
See also: link:jetty-env.xml-support[jetty-env.xml support].

| [[scanDir]] scanDir
| function(String) or function(java.io.File)
| -
| Adds a directory to the list of directories scanned by hot-deployment. +
See also: link:Hot-deployment[Hot deployment].

| [[fastReload]] fastReload 
| boolean or function(String) or function(java.io.File) or function(Map)
| false
| Adds folders to be fast-reloaded on change, i.e. copied to running web-app without restarting web-app. +
See also: link:Fast-reload[Fast reload].

| [[overlay]] overlay
| function(String) or function(Project)
| -
| Adds another project (in the same project tree) as overlay source. +
See also: link:Web-app-overlays[Web-app overlays].

| [[integrationTestTask]] integrationTestTask
| String
| "integrationTest"
| Name of gradle task in the same project, which gretty "encloses" with jetty start/stop. +
See also: link:Integration-tests-support[Integration tests support].
|===
